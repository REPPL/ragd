# Milestone: v0.3.0 - Advanced Search & CLI

Elevating retrieval quality and completing the CLI interface.

## Goal

Implement advanced search capabilities including hybrid retrieval, contextual embeddings, late chunking, and query processing. Also complete the CLI interface for all v0.2.0 backend features. This milestone transforms ragd from "good enough" retrieval to state-of-the-art quality with a fully-featured command line.

## Theme

**"Find What Matters"** - Better retrieval means better answers.

## Use Cases Addressed

| Use Case | Description | Status |
|----------|-------------|--------|
| Complex Queries | Multi-part questions, comparisons | âœ… Complete |
| Keyword + Semantic | Hybrid search for best of both worlds | âœ… Complete |
| Precision Search | Find exact matches with semantic context | âœ… Complete |
| CLI Management | Full CLI for metadata, tags, export, watch | âœ… Complete |

## Features Included

### Advanced Search

| Feature | Description | Status |
|---------|-------------|--------|
| [F-009](../features/completed/F-009-citation-output.md) | Citation Output | âœ… Complete |
| [F-010](../features/completed/F-010-contextual-retrieval.md) | Contextual Retrieval (Anthropic-style) | âœ… Complete |
| [F-011](../features/completed/F-011-late-chunking.md) | Late Chunking (JinaAI) | âœ… Complete |
| [F-012](../features/completed/F-012-hybrid-search.md) | Hybrid Search (BM25 + Dense) | âœ… Complete |

### Text Quality & HTML

| Feature | Description | Status |
|---------|-------------|--------|
| [F-039](../features/completed/F-039-advanced-html-processing.md) | Advanced HTML Processing | âœ… Complete |
| [F-051](../features/completed/F-051-text-quality-v2.md) | Text Quality v2 | âœ… Complete |

### CLI Enhancements

| Feature | Description | Status |
|---------|-------------|--------|
| [F-052](../features/completed/F-052-metadata-cli.md) | Metadata CLI (meta, tag, list) | âœ… Complete |
| [F-053](../features/completed/F-053-export-import-cli.md) | Export/Import CLI | âœ… Complete |
| [F-054](../features/completed/F-054-watch-folder-cli.md) | Watch Folder CLI | âœ… Complete |

### Deferred

| Feature | Description | Status |
|---------|-------------|--------|
| Query Decomposition | Break complex queries into sub-queries | ðŸ“… Deferred v0.4+ |
| Reranking | Cross-encoder reranking for precision | ðŸ“… Deferred v0.4+ |

## Dependencies

- **v0.2.0** - Killer Feature must be complete

## Technology Stack

| Component | Technology |
|-----------|------------|
| BM25 Retrieval | rank-bm25 or ChromaDB sparse |
| Reranking | BAAI/bge-reranker-v2-m3 |
| Late Chunking | JinaAI embeddings |
| Query Processing | Local LLM (Ollama) |

## Success Criteria

- [x] Hybrid search improves retrieval quality by 10-15%
- [x] Contextual retrieval improves NDCG@10 by 20%+
- [x] Late chunking preserves cross-chunk context
- [x] Citation output in multiple formats (APA, MLA, Chicago, BibTeX, Inline, Markdown)
- [x] Performance remains acceptable (< 500ms for 10K docs)

## Non-Goals for v0.3

- Multi-modal (images) â†’ v0.4
- Chat/LLM integration â†’ v0.5
- Web UI â†’ v1.0

## Draft Release Notes

### ragd v0.3.0 - Advanced Search & CLI

**Find what matters.**

Retrieval quality matters. v0.3 brings state-of-the-art search techniques and a complete CLI to your personal knowledge base.

**Advanced Search:**

- **Hybrid Search** - Combine keyword (BM25) and semantic search with RRF
- **Contextual Retrieval** - Anthropic-style document context in chunks via Ollama
- **Late Chunking** - Context-aware embeddings with full document context
- **Citation Output** - Multiple academic formats (APA, MLA, Chicago, BibTeX, Inline, Markdown)

**Text Quality:**

- **Advanced HTML** - selectolax-based parsing, Open Graph/JSON-LD metadata
- **Text Quality v2** - Ligature correction, caption removal, site-specific cleanup

**CLI Enhancements:**

- `ragd reindex` - Re-process documents with improved extraction
- `ragd meta show/edit` - View and edit document metadata
- `ragd tag add/remove/list` - Manage document tags
- `ragd list` - List documents with filtering
- `ragd export/import` - Backup and restore knowledge base
- `ragd watch start/stop/status` - Auto-index on file changes

**Performance:**

Expect 15-20% improvement in retrieval quality over v0.2.

**Getting Started:**

```bash
# Hybrid search (default)
ragd search "compare authentication methods"

# Manage metadata and tags
ragd meta edit doc-123 --title "My Document"
ragd tag add doc-123 important

# Backup your knowledge base
ragd export ~/backup.tar.gz
```

**What's Next:**

v0.4 adds multi-modal support: search your images and diagrams.

---

## Related Documentation

- [v0.2.0 - Killer Feature](./v0.2.0.md) - Prerequisite milestone
- [State-of-the-Art RAG](../research/state-of-the-art-rag.md)

### Feature Specifications
- [F-009: Citation Output](../features/completed/F-009-citation-output.md)
- [F-010: Contextual Retrieval](../features/completed/F-010-contextual-retrieval.md)
- [F-011: Late Chunking](../features/completed/F-011-late-chunking.md)
- [F-012: Hybrid Search](../features/completed/F-012-hybrid-search.md)
- [F-039: Advanced HTML Processing](../features/completed/F-039-advanced-html-processing.md)
- [F-051: Text Quality v2](../features/completed/F-051-text-quality-v2.md)
- [F-052: Metadata CLI](../features/completed/F-052-metadata-cli.md)
- [F-053: Export/Import CLI](../features/completed/F-053-export-import-cli.md)
- [F-054: Watch Folder CLI](../features/completed/F-054-watch-folder-cli.md)

---

**Status**: Released
