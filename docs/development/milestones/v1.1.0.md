# Milestone: v1.1.0 - Knowledge Graph & Entity Extraction

Populate knowledge graphs during indexing and explore them via CLI.

## Theme

**"Connected Knowledge"** - Extract entities, build graphs, explore relationships.

## Features Planned

### Entity Extraction (Prerequisites)

| ID | Feature | Description | Status |
|----|---------|-------------|--------|
| F-102 | NER Pipeline Integration | Extract entities during indexing | ðŸ“‹ Planned |
| F-100 | GLiNER NER | Zero-shot custom entity types | ðŸ“‹ Planned |
| F-101 | EPUB Extraction | Ebook text extraction | ðŸ“‹ Planned |

### Knowledge Graph CLI

| ID | Feature | Description | Status |
|----|---------|-------------|--------|
| F-128 | Knowledge Graph CLI | `ragd graph query`, explore, visualise | ðŸ“‹ Planned |
| F-129 | Comparison Framework | A/B testing models/configs | ðŸ“‹ Planned |
| F-130 | Batch Operations | Process multiple queries/documents | ðŸ“‹ Planned |
| F-131 | Results Export | Export to JSON/CSV | ðŸ“‹ Planned |
| F-132 | Timing & Metrics Output | `--timing` flag for performance | ðŸ“‹ Planned |

## Focus Areas

### Entity Extraction During Indexing (F-102)

The knowledge graph (v0.8.5) exists but remains empty because entity extraction isn't integrated into the indexing pipeline. F-102 closes this gap:

```bash
# Default: entities extracted during indexing
ragd add document.pdf
# â†’ Entities extracted, graph populated

# Disable if needed
ragd add document.pdf --no-entities

# Custom entity types (requires GLiNER)
ragd add document.pdf --entity-types "TECHNOLOGY,CONCEPT"

# Rebuild entities for existing documents
ragd entities rebuild
```

### GLiNER Zero-Shot NER (F-100)

Extract custom entity types without training:

```bash
# Extract domain-specific entities
ragd add legal_brief.pdf --entity-types "STATUTE,CASE_NUMBER,COURT"
ragd add medical_paper.pdf --entity-types "DISEASE,DRUG,GENE"
```

### EPUB Support (F-101)

Expand document format support to ebooks:

```bash
ragd add book.epub
ragd list --format epub
```

### Knowledge Graph CLI (F-128)

```bash
# Query the graph
ragd graph query "entities related to machine learning"

# Explore connections
ragd graph explore --entity "neural networks" --depth 2

# Show statistics
ragd graph stats

# Export for visualisation
ragd graph export --format json > knowledge_graph.json

# Visualise (generates HTML/SVG)
ragd graph visualise --output graph.html
```

### Automation Use Cases

```bash
# Compare models on same query set
for model in llama3 mistral gemma; do
  ragd search "complex query" --model $model --json >> results.jsonl
done

# Batch evaluation with timing
ragd batch-search queries.txt --timing --output results.csv

# Compare backends
ragd search "test query" --backend chroma --json > chroma.json
ragd search "test query" --backend faiss --json > faiss.json
```

## Success Criteria

### Entity Extraction
- [ ] Entities extracted during `ragd add` by default
- [ ] Knowledge graph auto-populated
- [ ] GLiNER available for custom entity types
- [ ] EPUB files indexable

### Knowledge Graph CLI
- [ ] Graph exploration via CLI
- [ ] Graph visualisation export
- [ ] Batch operations functional
- [ ] Results exportable to JSON/CSV
- [ ] Timing metrics available

## Dependencies

- v1.0.0 (Performance & Polish)
- F-022 (Knowledge Graph Foundation) - v0.8.5 âœ…

---

## Related Documentation

### Milestones
- [v1.0.0 Milestone](./v1.0.0.md) - Previous release
- [v1.2.0 Milestone](./v1.2.0.md) - Next planned release

### Feature Specifications
- [F-102: NER Pipeline Integration](../features/planned/F-102-ner-pipeline-integration.md)
- [F-100: GLiNER NER](../features/planned/F-100-gliner-ner.md)
- [F-101: EPUB Extraction](../features/planned/F-101-epub-extraction.md)
- [F-022: Knowledge Graph](../features/completed/F-022-knowledge-graph.md)

### Research
- [State-of-the-Art NER Indexing](../research/state-of-the-art-ner-indexing.md)
- [State-of-the-Art NER](../research/state-of-the-art-ner.md)
- [State-of-the-Art Knowledge Graphs](../research/state-of-the-art-knowledge-graphs.md)

### Architecture Decisions
- [ADR-0034: GLiNER Zero-Shot NER](../decisions/adrs/0034-gliner-zero-shot-ner.md)
- [ADR-0031: Knowledge Graph Storage](../decisions/adrs/0031-knowledge-graph-storage.md)

---

**Status**: Planned
