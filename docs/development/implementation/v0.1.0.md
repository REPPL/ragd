# Implementation: v0.1.0 Core RAG

## Overview

v0.1.0 delivers the foundational RAG pipeline: document ingestion, text extraction, chunking, embedding generation, and semantic search. All operations run locally with no external API dependencies.

## Features Implemented

| Feature | Status | Notes |
|---------|--------|-------|
| [F-001](../features/completed/F-001-document-ingestion.md) | Complete | File discovery, format detection, pipeline orchestration |
| [F-002](../features/completed/F-002-text-extraction.md) | Complete | PDF (PyMuPDF), HTML (BeautifulSoup), TXT, Markdown |
| [F-003](../features/completed/F-003-chunking-engine.md) | Complete | Sentence, fixed, and recursive chunking strategies |
| [F-004](../features/completed/F-004-embedding-generation.md) | Complete | sentence-transformers with all-MiniLM-L6-v2 |
| [F-005](../features/completed/F-005-semantic-search.md) | Complete | ChromaDB vector search with score filtering |
| [F-006](../features/completed/F-006-result-formatting.md) | Complete | Rich, Plain, JSON output formats; Textual TUI navigator |
| [F-007](../features/completed/F-007-status-dashboard.md) | Complete | Document/chunk counts, configuration summary |
| [F-008](../features/completed/F-008-health-checks.md) | Complete | Config, storage, embedding, dependency checks |
| [F-035](../features/completed/F-035-health-check.md) | Complete | `ragd doctor` command |
| [F-036](../features/completed/F-036-guided-setup.md) | Complete | `ragd init` with hardware detection |

**Deferred:** F-009 (Citation Output) - Basic source attribution implemented; full citation formats (APA, IEEE, etc.) deferred to v0.3.

## Architecture

```
src/ragd/
├── __init__.py              # Version (0.1.1)
├── cli.py                   # Typer CLI entry point (thin wrapper)
├── config.py                # Pydantic configuration management
├── hardware.py              # Hardware detection and tier classification
├── ingestion/
│   ├── __init__.py          # Pipeline exports
│   ├── chunker.py           # Chunking strategies (sentence, fixed, recursive)
│   ├── extractor.py         # Text extraction (PDF, HTML, TXT, MD)
│   └── pipeline.py          # Ingestion orchestration
├── embedding/
│   ├── __init__.py
│   └── embedder.py          # sentence-transformers wrapper
├── search/
│   ├── __init__.py
│   └── searcher.py          # Vector search with ChromaDB
├── storage/
│   ├── __init__.py
│   └── chroma.py            # ChromaDB persistence layer
├── health/
│   ├── __init__.py
│   └── checker.py           # Health check implementations
├── utils/
│   ├── __init__.py
│   └── files.py             # File utilities, format detection
└── ui/
    ├── __init__.py          # Formatter exports
    ├── formatters.py        # Output formatting (Rich, Plain, JSON)
    ├── cli/
    │   ├── __init__.py
    │   └── commands.py      # CLI command implementations
    ├── tui/
    │   ├── __init__.py
    │   └── search.py        # Textual search navigator
    └── web/
        └── __init__.py      # Placeholder for future web UI
```

## Technology Stack

| Component | Technology | Version |
|-----------|------------|---------|
| CLI | Typer + Rich | 0.9+ / 13+ |
| TUI | Textual | 0.40+ |
| Vector Store | ChromaDB | 0.4+ |
| Embeddings | sentence-transformers | 2.2+ |
| PDF Extraction | PyMuPDF (fitz) | 1.23+ |
| HTML Parsing | BeautifulSoup4 | 4.12+ |
| Configuration | Pydantic v2 | 2.0+ |
| Testing | pytest | 9.0+ |

## Key Implementation Decisions

1. **Hardware Detection:** Automatic tier classification (minimal/standard/high/extreme) based on RAM and CPU cores, with model recommendations per tier.

2. **Encoding Handling:** BeautifulSoup's native encoding detection for HTML (respects meta charset); UTF-8 with latin-1 fallback for text files.

3. **PDF Handling:** PyMuPDF with context manager pattern; graceful failure for scanned/image-only PDFs (OCR deferred to v0.2).

4. **Default min_score:** Set to 0.3 to filter low-relevance results by default.

5. **Interactive Search:** Textual TUI with vim-style navigation (j/k) as default when TTY detected; `--no-interactive` for scripted use. TUI features:
   - Full-screen panel with document title centred at top
   - Content area fills available height
   - Status bar below panel: chunk (left, blue), count (centre, blue), score (right, red)
   - Footer with keyboard shortcuts (j/k/q)

6. **UI Module Structure:** Full separation into `ui/cli/`, `ui/tui/`, `ui/web/` for maintainability.

## Deviations from Spec

1. **HTML Support Added:** Originally planned for v0.2 web archive feature, implemented early as text extraction was trivial.

2. **F-009 Simplified:** Full citation formats (APA, IEEE, Chicago) deferred; v0.1 provides basic source attribution only.

3. **Config Command:** Simplified to `show` and `path` subcommands; `set` and `reset` deferred.

## Test Coverage

- **98 tests passing**
- Core modules have comprehensive test coverage
- Test fixtures include golden answers for validation

## Related Documentation

- [v0.1.0 Milestone](../milestones/v0.1.0.md)
- [Completed Features](../features/completed/)
- [Getting Started Tutorial](../../tutorials/getting-started.md)

---

**Status**: Complete
